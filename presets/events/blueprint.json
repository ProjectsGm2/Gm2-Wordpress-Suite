{
  "post_types": {
    "event": {
      "labels": {
        "name": "Events",
        "singular_name": "Event"
      },
      "supports": [
        "title",
        "editor",
        "thumbnail",
        "excerpt"
      ],
      "has_archive": true,
      "rewrite": {
        "slug": "events"
      },
      "menu_icon": "dashicons-calendar-alt",
      "template": [
        [
          "core/group",
          {
            "metadata": {
              "name": "Event Layout"
            },
            "layout": {
              "type": "constrained"
            }
          },
          [
            [
              "core/heading",
              {
                "level": 2,
                "placeholder": "Event headline or hero"
              }
            ],
            [
              "core/paragraph",
              {
                "placeholder": "Share key event highlights or switch to Elementor for a custom design."
              }
            ],
            [
              "core/shortcode",
              {
                "text": "[elementor-template id=\"\"]"
              }
            ]
          ]
        ]
      ],
      "template_lock": "insert",
      "seo": {
        "meta_title": "{{title}} \u2013 Event Details",
        "meta_description": "{{description}}",
        "canonical": "{{permalink}}",
        "open_graph": {
          "title": "{{title}}",
          "description": "{{description}}",
          "image": "{{image}}"
        },
        "twitter": {
          "card": "summary_large_image",
          "title": "{{title}}",
          "description": "{{description}}",
          "image": "{{image}}"
        }
      }
    },
    "venue": {
      "labels": {
        "name": "Venues",
        "singular_name": "Venue"
      },
      "supports": [
        "title",
        "editor",
        "thumbnail",
        "excerpt"
      ],
      "has_archive": true,
      "rewrite": {
        "slug": "venues"
      },
      "menu_icon": "dashicons-location-alt",
      "show_in_rest": true,
      "rest_base": "venues"
    },
    "organizer": {
      "labels": {
        "name": "Organizers",
        "singular_name": "Organizer"
      },
      "supports": [
        "title",
        "editor",
        "thumbnail",
        "excerpt"
      ],
      "has_archive": true,
      "rewrite": {
        "slug": "organizers"
      },
      "menu_icon": "dashicons-groups",
      "show_in_rest": true,
      "rest_base": "organizers"
    }
  },
  "taxonomies": {
    "event_category": {
      "object_type": [
        "event"
      ],
      "labels": {
        "name": "Event Categories",
        "singular_name": "Event Category"
      },
      "hierarchical": true,
      "rewrite": {
        "slug": "event-category"
      }
    },
    "event_tag": {
      "object_type": [
        "event"
      ],
      "labels": {
        "name": "Event Tags",
        "singular_name": "Event Tag"
      },
      "hierarchical": false,
      "rewrite": {
        "slug": "event-tag"
      }
    }
  },
  "field_groups": [
    {
      "key": "group_event_details",
      "title": "Event Details",
      "fields": [
        {
          "key": "field_start_date",
          "label": "Start Date",
          "name": "start_date",
          "type": "datetime",
          "required": true,
          "expose_in_rest": true
        },
        {
          "key": "field_start_time_zone",
          "label": "Start Time Zone",
          "name": "start_time_zone",
          "type": "text",
          "required": true,
          "format": "timezone",
          "regex": "^[-A-Za-z0-9_/+]+$",
          "instructions": "Provide the IANA time zone identifier for the event start time.",
          "expose_in_rest": true,
          "rest": {
            "schema": {
              "type": "string",
              "pattern": "^[-A-Za-z0-9_/+]+$"
            }
          }
        },
        {
          "key": "field_end_date",
          "label": "End Date",
          "name": "end_date",
          "type": "datetime",
          "required": true,
          "expose_in_rest": true
        },
        {
          "key": "field_end_time_zone",
          "label": "End Time Zone",
          "name": "end_time_zone",
          "type": "text",
          "required": true,
          "format": "timezone",
          "regex": "^[-A-Za-z0-9_/+]+$",
          "instructions": "Provide the IANA time zone identifier for the event end time.",
          "expose_in_rest": true,
          "rest": {
            "schema": {
              "type": "string",
              "pattern": "^[-A-Za-z0-9_/+]+$"
            }
          }
        },
        {
          "key": "field_event_status",
          "label": "Event Status",
          "name": "status",
          "type": "select",
          "required": true,
          "default": "EventScheduled",
          "options": {
            "EventScheduled": "Scheduled",
            "EventCancelled": "Cancelled",
            "EventPostponed": "Postponed",
            "EventRescheduled": "Rescheduled",
            "EventMovedOnline": "Moved Online"
          },
          "instructions": "Set the current publication status of the event.",
          "expose_in_rest": true,
          "rest": {
            "schema": {
              "type": "string",
              "enum": [
                "EventScheduled",
                "EventCancelled",
                "EventPostponed",
                "EventRescheduled",
                "EventMovedOnline"
              ]
            }
          }
        },
        {
          "key": "field_attendance_mode",
          "label": "Attendance Mode",
          "name": "attendance_mode",
          "type": "select",
          "required": true,
          "default": "OfflineEventAttendanceMode",
          "options": {
            "OfflineEventAttendanceMode": "In Person",
            "OnlineEventAttendanceMode": "Online",
            "MixedEventAttendanceMode": "Hybrid"
          },
          "instructions": "Describe whether the event is in-person, online, or hybrid.",
          "expose_in_rest": true,
          "rest": {
            "schema": {
              "type": "string",
              "enum": [
                "OfflineEventAttendanceMode",
                "OnlineEventAttendanceMode",
                "MixedEventAttendanceMode"
              ]
            }
          }
        },
        {
          "key": "field_location",
          "label": "Location",
          "name": "location",
          "type": "text",
          "required": true,
          "expose_in_rest": true
        },
        {
          "key": "field_event_venue",
          "label": "Venue",
          "name": "venue",
          "type": "relationship",
          "relationship_type": "post",
          "post_types": [
            "venue"
          ],
          "sync": "two-way",
          "instructions": "Select the venue hosting this event.",
          "expose_in_rest": true
        },
        {
          "key": "field_event_organizer",
          "label": "Organizer",
          "name": "organizer",
          "type": "relationship",
          "relationship_type": "post",
          "post_types": [
            "organizer"
          ],
          "sync": "two-way",
          "instructions": "Assign the organizer responsible for this event.",
          "expose_in_rest": true
        },
        {
          "key": "field_recurrence_rule",
          "label": "Recurrence Rule",
          "name": "recurrence_rule",
          "type": "text",
          "regex": "^(FREQ=(DAILY|WEEKLY|MONTHLY|YEARLY))(;[A-Z]+=[^;]+)*$",
          "instructions": "Optional RFC5545 RRULE string that defines how the event repeats.",
          "expose_in_rest": true,
          "rest": {
            "schema": {
              "type": "string",
              "pattern": "^(FREQ=(DAILY|WEEKLY|MONTHLY|YEARLY))(;[A-Z]+=[^;]+)*$"
            }
          }
        },
        {
          "key": "field_virtual_event_url",
          "label": "Virtual Event URL",
          "name": "virtual_event_url",
          "type": "url",
          "instructions": "Link to the livestream or webinar room when the event is accessible online.",
          "conditions": {
            "relation": "or",
            "attendance_online": {
              "field": "attendance_mode",
              "operator": "==",
              "value": "OnlineEventAttendanceMode"
            },
            "attendance_hybrid": {
              "field": "attendance_mode",
              "operator": "==",
              "value": "MixedEventAttendanceMode"
            }
          },
          "expose_in_rest": true,
          "rest": {
            "schema": {
              "type": "string",
              "format": "uri"
            }
          }
        },
        {
          "key": "field_ticket_offers",
          "label": "Ticket Offers",
          "name": "ticket_offers",
          "type": "repeater",
          "instructions": "Add ticket price options and where attendees can purchase them.",
          "sub_fields": {
            "price": {
              "type": "number",
              "label": "Price",
              "min": 0,
              "step": 0.01,
              "required": true
            },
            "currency": {
              "type": "select",
              "label": "Currency",
              "required": true,
              "options": {
                "USD": "USD (US Dollar)",
                "EUR": "EUR (Euro)",
                "GBP": "GBP (British Pound)",
                "AUD": "AUD (Australian Dollar)",
                "CAD": "CAD (Canadian Dollar)"
              }
            },
            "url": {
              "type": "url",
              "label": "Purchase URL",
              "instructions": "Optional link to an external ticketing page.",
              "format": "uri"
            }
          },
          "expose_in_rest": true,
          "rest": {
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "price": {
                    "type": "number",
                    "minimum": 0
                  },
                  "currency": {
                    "type": "string",
                    "enum": [
                      "USD",
                      "EUR",
                      "GBP",
                      "AUD",
                      "CAD"
                    ]
                  },
                  "url": {
                    "type": "string",
                    "format": "uri"
                  }
                },
                "required": [
                  "price",
                  "currency"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        {
          "key": "field_next_occurrence",
          "label": "Next Occurrence",
          "name": "next_occurrence",
          "type": "computed",
          "computed": {
            "dependencies": [
              "start_date",
              "start_time_zone",
              "end_date",
              "end_time_zone",
              "recurrence_rule"
            ],
            "callback": "Gm2\\Presets\\Events\\EventComputed::computeNextOccurrence",
            "return_type": "string",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          "instructions": "Automatically calculates the next upcoming occurrence based on the recurrence pattern.",
          "expose_in_rest": true,
          "rest": {
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          }
        }
      ]
    }
  ],
  "schema_mappings": {
    "event": {
      "type": "Event",
      "map": {
        "startDate": "start_date",
        "endDate": "end_date",
        "location": "location",
        "eventStatus": "status",
        "eventAttendanceMode": "attendance_mode",
        "onlineEventUrl": "virtual_event_url",
        "offers": "ticket_offers",
        "organizer": "organizer",
        "nextStartDate": "next_occurrence"
      }
    }
  },
  "label": "Events Calendar",
  "description": "Event schedule with structured data and Elementor-ready hero.",
  "fields": {
    "groups": [
      {
        "key": "group_event_details",
        "title": "Event Details",
        "fields": [
          {
            "key": "field_start_date",
            "label": "Start Date",
            "name": "start_date",
            "type": "datetime",
            "required": true,
            "expose_in_rest": true
          },
          {
            "key": "field_start_time_zone",
            "label": "Start Time Zone",
            "name": "start_time_zone",
            "type": "text",
            "required": true,
            "format": "timezone",
            "regex": "^[-A-Za-z0-9_/+]+$",
            "instructions": "Provide the IANA time zone identifier for the event start time.",
            "expose_in_rest": true,
            "rest": {
              "schema": {
                "type": "string",
                "pattern": "^[-A-Za-z0-9_/+]+$"
              }
            }
          },
          {
            "key": "field_end_date",
            "label": "End Date",
            "name": "end_date",
            "type": "datetime",
            "required": true,
            "expose_in_rest": true
          },
          {
            "key": "field_end_time_zone",
            "label": "End Time Zone",
            "name": "end_time_zone",
            "type": "text",
            "required": true,
            "format": "timezone",
            "regex": "^[-A-Za-z0-9_/+]+$",
            "instructions": "Provide the IANA time zone identifier for the event end time.",
            "expose_in_rest": true,
            "rest": {
              "schema": {
                "type": "string",
                "pattern": "^[-A-Za-z0-9_/+]+$"
              }
            }
          },
          {
            "key": "field_event_status",
            "label": "Event Status",
            "name": "status",
            "type": "select",
            "required": true,
            "default": "EventScheduled",
            "options": {
              "EventScheduled": "Scheduled",
              "EventCancelled": "Cancelled",
              "EventPostponed": "Postponed",
              "EventRescheduled": "Rescheduled",
              "EventMovedOnline": "Moved Online"
            },
            "instructions": "Set the current publication status of the event.",
            "expose_in_rest": true,
            "rest": {
              "schema": {
                "type": "string",
                "enum": [
                  "EventScheduled",
                  "EventCancelled",
                  "EventPostponed",
                  "EventRescheduled",
                  "EventMovedOnline"
                ]
              }
            }
          },
          {
            "key": "field_attendance_mode",
            "label": "Attendance Mode",
            "name": "attendance_mode",
            "type": "select",
            "required": true,
            "default": "OfflineEventAttendanceMode",
            "options": {
              "OfflineEventAttendanceMode": "In Person",
              "OnlineEventAttendanceMode": "Online",
              "MixedEventAttendanceMode": "Hybrid"
            },
            "instructions": "Describe whether the event is in-person, online, or hybrid.",
            "expose_in_rest": true,
            "rest": {
              "schema": {
                "type": "string",
                "enum": [
                  "OfflineEventAttendanceMode",
                  "OnlineEventAttendanceMode",
                  "MixedEventAttendanceMode"
                ]
              }
            }
          },
          {
            "key": "field_location",
            "label": "Location",
            "name": "location",
            "type": "text",
            "required": true,
            "expose_in_rest": true
          },
          {
            "key": "field_event_venue",
            "label": "Venue",
            "name": "venue",
            "type": "relationship",
            "relationship_type": "post",
            "post_types": [
              "venue"
            ],
            "sync": "two-way",
            "instructions": "Select the venue hosting this event.",
            "expose_in_rest": true
          },
          {
            "key": "field_event_organizer",
            "label": "Organizer",
            "name": "organizer",
            "type": "relationship",
            "relationship_type": "post",
            "post_types": [
              "organizer"
            ],
            "sync": "two-way",
            "instructions": "Assign the organizer responsible for this event.",
            "expose_in_rest": true
          },
          {
            "key": "field_recurrence_rule",
            "label": "Recurrence Rule",
            "name": "recurrence_rule",
            "type": "text",
            "regex": "^(FREQ=(DAILY|WEEKLY|MONTHLY|YEARLY))(;[A-Z]+=[^;]+)*$",
            "instructions": "Optional RFC5545 RRULE string that defines how the event repeats.",
            "expose_in_rest": true,
            "rest": {
              "schema": {
                "type": "string",
                "pattern": "^(FREQ=(DAILY|WEEKLY|MONTHLY|YEARLY))(;[A-Z]+=[^;]+)*$"
              }
            }
          },
          {
            "key": "field_virtual_event_url",
            "label": "Virtual Event URL",
            "name": "virtual_event_url",
            "type": "url",
            "instructions": "Link to the livestream or webinar room when the event is accessible online.",
            "conditions": {
              "relation": "or",
              "attendance_online": {
                "field": "attendance_mode",
                "operator": "==",
                "value": "OnlineEventAttendanceMode"
              },
              "attendance_hybrid": {
                "field": "attendance_mode",
                "operator": "==",
                "value": "MixedEventAttendanceMode"
              }
            },
            "expose_in_rest": true,
            "rest": {
              "schema": {
                "type": "string",
                "format": "uri"
              }
            }
          },
          {
            "key": "field_ticket_offers",
            "label": "Ticket Offers",
            "name": "ticket_offers",
            "type": "repeater",
            "instructions": "Add ticket price options and where attendees can purchase them.",
            "sub_fields": {
              "price": {
                "type": "number",
                "label": "Price",
                "min": 0,
                "step": 0.01,
                "required": true
              },
              "currency": {
                "type": "select",
                "label": "Currency",
                "required": true,
                "options": {
                  "USD": "USD (US Dollar)",
                  "EUR": "EUR (Euro)",
                  "GBP": "GBP (British Pound)",
                  "AUD": "AUD (Australian Dollar)",
                  "CAD": "CAD (Canadian Dollar)"
                }
              },
              "url": {
                "type": "url",
                "label": "Purchase URL",
                "instructions": "Optional link to an external ticketing page.",
                "format": "uri"
              }
            },
            "expose_in_rest": true,
            "rest": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "price": {
                      "type": "number",
                      "minimum": 0
                    },
                    "currency": {
                      "type": "string",
                      "enum": [
                        "USD",
                        "EUR",
                        "GBP",
                        "AUD",
                        "CAD"
                      ]
                    },
                    "url": {
                      "type": "string",
                      "format": "uri"
                    }
                  },
                  "required": [
                    "price",
                    "currency"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          {
            "key": "field_next_occurrence",
            "label": "Next Occurrence",
            "name": "next_occurrence",
            "type": "computed",
            "computed": {
              "dependencies": [
                "start_date",
                "start_time_zone",
                "end_date",
                "end_time_zone",
                "recurrence_rule"
              ],
              "callback": "Gm2\\Presets\\Events\\EventComputed::computeNextOccurrence",
              "return_type": "string",
              "schema": {
                "type": "string",
                "format": "date-time"
              }
            },
            "instructions": "Automatically calculates the next upcoming occurrence based on the recurrence pattern.",
            "expose_in_rest": true,
            "rest": {
              "schema": {
                "type": "string",
                "format": "date-time"
              }
            }
          }
        ]
      }
    ]
  },
  "relationships": [
    {
      "from": "event",
      "to": "venue",
      "type": "event_to_venue",
      "label": "Hosted at",
      "cardinality": "many-to-one"
    },
    {
      "from": "event",
      "to": "organizer",
      "type": "event_to_organizer",
      "label": "Organized by",
      "cardinality": "many-to-one"
    }
  ],
  "default_terms": {
    "event_category": [
      {
        "name": "Workshop",
        "slug": "workshop"
      },
      {
        "name": "Webinar",
        "slug": "webinar"
      }
    ],
    "event_tag": [
      {
        "name": "Networking",
        "slug": "networking"
      },
      {
        "name": "Virtual",
        "slug": "virtual"
      }
    ]
  },
  "elementor_query_ids": [
    {
      "key": "upcoming",
      "id": "gm2_upcoming_events",
      "description": "Future events ordered by start date in ascending order.",
      "post_types": [
        "event"
      ]
    },
    {
      "key": "past",
      "id": "gm2_past_events",
      "description": "Historic events ordered by start date descending.",
      "post_types": [
        "event"
      ]
    }
  ],
  "elementor": {
    "templates": {
      "single_event": {
        "type": "shortcode",
        "description": "Populate the shortcode with a saved Elementor template for the event hero.",
        "file": "elementor/event-hero.json"
      }
    }
  },
  "seo_mappings": [
    {
      "key": "event",
      "type": "Event",
      "map": {
        "startDate": "start_date",
        "endDate": "end_date",
        "location": "location"
      }
    }
  ],
  "templates": {
    "event_single": {
      "post_type": "event",
      "lock": "insert",
      "blocks": [
        [
          "core/group",
          {
            "metadata": {
              "name": "Event Layout"
            },
            "layout": {
              "type": "constrained"
            }
          },
          [
            [
              "core/heading",
              {
                "level": 2,
                "placeholder": "Event headline or hero"
              }
            ],
            [
              "core/paragraph",
              {
                "placeholder": "Share key event highlights or switch to Elementor for a custom design."
              }
            ],
            [
              "core/shortcode",
              {
                "text": "[elementor-template id=\"\"]"
              }
            ]
          ]
        ]
      ],
      "description": "Locked group keeps the event layout consistent while enabling Elementor hero swaps.",
      "elementor_placeholder": "[elementor-template id=\"\"]"
    }
  }
}
